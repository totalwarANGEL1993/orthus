<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<button onclick="topFunction()" id="back2top" title="Nach oben scrollen">&#11014</button>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>ldoc</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Functions">Functions</a></li>
<li><a href="#Classes">Classes</a></li>
<li><a href="#NonPlayerCharacter">NonPlayerCharacter</a></li>
<li><a href="#NonPlayerMerchant">NonPlayerMerchant</a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/information_ex2.html">information_ex2</a></li>
  <li><strong>interaction</strong></li>
  <li><a href="../modules/oop.html">oop</a></li>
  <li><a href="../modules/questbehavior.html">questbehavior</a></li>
  <li><a href="../modules/questdebug.html">questdebug</a></li>
  <li><a href="../modules/questsystem.html">questsystem</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>interaction</code></h1>
<p>Implements a npc system that can be run seperatly to the vanilla npc system.</p>
<p>
<p> Normal npcs can be configured just as the vanilla npcs. To create a normal
 npc use the following:
 <pre>local NPC = new(NonPlayerCharacter, "myNPC")
     :SetCallback(SomeFunction)
     :Activate();</pre>
<p> The system also allows to create special traders based of the merchant
 widget. Units, resources and custom actions can be traded and all offers
 can respawn. Example for a merchant:
 <pre>local NPC = new(NonPlayerMerchant, "myMerchant")
     :AddResourceOffer(ResourceType.Clay, 300, {Gold = 150}, 15, 2*60)
     :Activate();</pre>
 This merchant sells 15x300 clay for 150 gold each. After 2 minutes the
 offer is restored by 1. The price will have inflation and deflation.
<p> Normal settlers can either be npcs or merchants!
<p> <b>Required modules:</b>
 <ul>
 <li>qsb.oop</li>
 </ul>
</p>


<h2><a href="#Functions">Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#Interaction:Install">Interaction:Install ()</a></td>
	<td class="summary">Installs the interaction mod.</td>
	</tr>
</table>
<h2><a href="#Classes">Classes</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#NonPlayerCharacter">NonPlayerCharacter</a></td>
	<td class="summary">Base class for NPCs that implements the vanilla functionality of an npc.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#NonPlayerMerchant">NonPlayerMerchant</a></td>
	<td class="summary">Base class for NPCs that implements the vanilla functionality of an npc.</td>
	</tr>
</table>
<h2><a href="#NonPlayerCharacter">NonPlayerCharacter</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#NonPlayerCharacter:Activate">NonPlayerCharacter:Activate ()</a></td>
	<td class="summary">Activates the NPC</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#NonPlayerCharacter:AddStrayPoint">NonPlayerCharacter:AddStrayPoint (_Waypoint)</a></td>
	<td class="summary">Adds a stray position to the npc.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#NonPlayerCharacter:AddWaypoint">NonPlayerCharacter:AddWaypoint (_Waypoint)</a></td>
	<td class="summary">Adds a waypoint to the npc.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#NonPlayerCharacter:Deactivate">NonPlayerCharacter:Deactivate ()</a></td>
	<td class="summary">Deactivates the NPC.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#NonPlayerCharacter:SetCallback">NonPlayerCharacter:SetCallback (_Callback)</a></td>
	<td class="summary">Sets a talking callback for the npc.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#NonPlayerCharacter:SetFollow">NonPlayerCharacter:SetFollow (_Hero)</a></td>
	<td class="summary">Sets the hero this npc is following.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#NonPlayerCharacter:SetHero">NonPlayerCharacter:SetHero (_Hero)</a></td>
	<td class="summary">Sets the hero that can speak to the npc.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#NonPlayerCharacter:SetHeroInfo">NonPlayerCharacter:SetHeroInfo (_Info)</a></td>
	<td class="summary">Sets the information text, if the wrong hero talked to the npc</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#NonPlayerCharacter:SetTarget">NonPlayerCharacter:SetTarget (_Target)</a></td>
	<td class="summary">Sets a target destination until the npc is following the hero.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#NonPlayerCharacter:SetWaittime">NonPlayerCharacter:SetWaittime (_Waittime)</a></td>
	<td class="summary">Overwrites the default waittime between two waypoints.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#NonPlayerCharacter:SetWayCallback">NonPlayerCharacter:SetWayCallback (_Callback)</a></td>
	<td class="summary">Sets an alternate callback that will be triggered when the npc is on his
 way to a destination.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#NonPlayerCharacter:TalkedTo">NonPlayerCharacter:TalkedTo ()</a></td>
	<td class="summary">Checks, if some hero talked to this npc.</td>
	</tr>
</table>
<h2><a href="#NonPlayerMerchant">NonPlayerMerchant</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#NonPlayerMerchant:Activate">NonPlayerMerchant:Activate ()</a></td>
	<td class="summary">Activates the merchant if it is not a vanilla merchant.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#NonPlayerMerchant:AddCustomOffer">NonPlayerMerchant:AddCustomOffer (_Action, _Amount, _Costs, _Icon, _Description, _Refresh)</a></td>
	<td class="summary">Adds an offer with a custom function.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#NonPlayerMerchant:AddResourceOffer">NonPlayerMerchant:AddResourceOffer (_Good, _Amount, _Costs, _Load, _Refresh)</a></td>
	<td class="summary">Adds a resource offer to the merchant.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#NonPlayerMerchant:AddTechnologyOffer">NonPlayerMerchant:AddTechnologyOffer (_Good, _Costs)</a></td>
	<td class="summary">Adds a technology offer to the merchant.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#NonPlayerMerchant:AddTroopOffer">NonPlayerMerchant:AddTroopOffer (_Good, _Costs, _Amount, _Refresh)</a></td>
	<td class="summary">Adds a troop offer to the merchant.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#NonPlayerMerchant:Deactivate">NonPlayerMerchant:Deactivate ()</a></td>
	<td class="summary">Deactivates the merchant if it is not a vanilla merchant.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#NonPlayerMerchant:GetTradingVolume">NonPlayerMerchant:GetTradingVolume (_SlotIndex)</a></td>
	<td class="summary">Returns how often the offer at the index was accepted by the player.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#NonPlayerMerchant:SetSpawnpoint">NonPlayerMerchant:SetSpawnpoint (_Spawnpoint)</a></td>
	<td class="summary">Sets a different spawnpoint for units bought at the merchant.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Functions"></a>Functions</h2>

    <dl class="function">
    <dt>
    <a name = "Interaction:Install"></a>
    <strong>Interaction:Install ()</strong>
    </dt>
    <dd>
    Installs the interaction mod.







</dd>
</dl>
    <h2 class="section-header "><a name="Classes"></a>Classes</h2>

    <dl class="function">
    <dt>
    <a name = "NonPlayerCharacter"></a>
    <strong>NonPlayerCharacter</strong>
    </dt>
    <dd>
    Base class for NPCs that implements the vanilla functionality of an npc.







</dd>
    <dt>
    <a name = "NonPlayerMerchant"></a>
    <strong>NonPlayerMerchant</strong>
    </dt>
    <dd>
    Base class for NPCs that implements the vanilla functionality of an npc.


    <h3>Fields:</h3>
    <ul>
        <li><span class="parameter">_ScriptName</span>
         [string] Script name of merchant
        </li>
    </ul>





</dd>
</dl>
    <h2 class="section-header "><a name="NonPlayerCharacter"></a>NonPlayerCharacter</h2>

    <dl class="function">
    <dt>
    <a name = "NonPlayerCharacter:Activate"></a>
    <strong>NonPlayerCharacter:Activate ()</strong>
    </dt>
    <dd>
    Activates the NPC



    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "NonPlayerCharacter:AddStrayPoint"></a>
    <strong>NonPlayerCharacter:AddStrayPoint (_Waypoint)</strong>
    </dt>
    <dd>
    Adds a stray position to the npc.  The npc will walk to a random waypoint
 from the stray list.
 Waypoints must be reachable!


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_Waypoint</span>
         [string] Waypoint to pass
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "NonPlayerCharacter:AddWaypoint"></a>
    <strong>NonPlayerCharacter:AddWaypoint (_Waypoint)</strong>
    </dt>
    <dd>
    Adds a waypoint to the npc.  The npc will move over every waypoint to the
 destination. The last waypoint is used as destination.
 Waypoints must be reachable!


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_Waypoint</span>
         [string] Waypoint to pass
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "NonPlayerCharacter:Deactivate"></a>
    <strong>NonPlayerCharacter:Deactivate ()</strong>
    </dt>
    <dd>
    Deactivates the NPC.



    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "NonPlayerCharacter:SetCallback"></a>
    <strong>NonPlayerCharacter:SetCallback (_Callback)</strong>
    </dt>
    <dd>
    Sets a talking callback for the npc.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_Callback</span>
         [function] Function to call
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "NonPlayerCharacter:SetFollow"></a>
    <strong>NonPlayerCharacter:SetFollow (_Hero)</strong>
    </dt>
    <dd>
    Sets the hero this npc is following.  To let him follow anybody set hero
 as true.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_Hero</span>
         [string|boolean] Hero to follow
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "NonPlayerCharacter:SetHero"></a>
    <strong>NonPlayerCharacter:SetHero (_Hero)</strong>
    </dt>
    <dd>
    Sets the hero that can speak to the npc.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_Hero</span>
         [string] Scriptname of hero
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "NonPlayerCharacter:SetHeroInfo"></a>
    <strong>NonPlayerCharacter:SetHeroInfo (_Info)</strong>
    </dt>
    <dd>
    Sets the information text, if the wrong hero talked to the npc


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_Info</span>
         [string] Info message
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "NonPlayerCharacter:SetTarget"></a>
    <strong>NonPlayerCharacter:SetTarget (_Target)</strong>
    </dt>
    <dd>
    Sets a target destination until the npc is following the hero.
 Must be reachable!


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_Target</span>
         [string] Destination of npc
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "NonPlayerCharacter:SetWaittime"></a>
    <strong>NonPlayerCharacter:SetWaittime (_Waittime)</strong>
    </dt>
    <dd>
    Overwrites the default waittime between two waypoints.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_Waittime</span>
         [number] time to wait
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "NonPlayerCharacter:SetWayCallback"></a>
    <strong>NonPlayerCharacter:SetWayCallback (_Callback)</strong>
    </dt>
    <dd>
    Sets an alternate callback that will be triggered when the npc is on his
 way to a destination.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_Callback</span>
         [function] Function to call
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "NonPlayerCharacter:TalkedTo"></a>
    <strong>NonPlayerCharacter:TalkedTo ()</strong>
    </dt>
    <dd>
    Checks, if some hero talked to this npc.



    <h3>Returns:</h3>
    <ol>

        [boolean] Talked to
    </ol>




</dd>
</dl>
    <h2 class="section-header "><a name="NonPlayerMerchant"></a>NonPlayerMerchant</h2>

    <dl class="function">
    <dt>
    <a name = "NonPlayerMerchant:Activate"></a>
    <strong>NonPlayerMerchant:Activate ()</strong>
    </dt>
    <dd>
    Activates the merchant if it is not a vanilla merchant.



    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "NonPlayerMerchant:AddCustomOffer"></a>
    <strong>NonPlayerMerchant:AddCustomOffer (_Action, _Amount, _Costs, _Icon, _Description, _Refresh)</strong>
    </dt>
    <dd>
    Adds an offer with a custom function.  The function receives the data of
 the offer and the data of the whole npc.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_Action</span>
         [function] Custom function
        </li>
        <li><span class="parameter">_Amount</span>
         [number] Amount of offers
        </li>
        <li><span class="parameter">_Costs</span>
         [table] Costs table
        </li>
        <li><span class="parameter">_Icon</span>
         [string] Icon texture
        </li>
        <li><span class="parameter">_Description</span>
         [table] Tooltip content
        </li>
        <li><span class="parameter">_Refresh</span>
         [number] Refresh rate
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">Merchant:AddCustomOffer(SomeFunction, <span class="number">5</span>, {Gold = <span class="number">340</span>}, {Title = <span class="string">"Titel"</span>, Text = <span class="string">"Das ist die Beschreibung."</span>});</pre>
    </ul>

</dd>
    <dt>
    <a name = "NonPlayerMerchant:AddResourceOffer"></a>
    <strong>NonPlayerMerchant:AddResourceOffer (_Good, _Amount, _Costs, _Load, _Refresh)</strong>
    </dt>
    <dd>
    Adds a resource offer to the merchant.  Raw resources are not supported!


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_Good</span>
         [number] Resource type
        </li>
        <li><span class="parameter">_Amount</span>
         [number] Amount of resource
        </li>
        <li><span class="parameter">_Costs</span>
         [table] Costs table
        </li>
        <li><span class="parameter">_Load</span>
         [number] Amount of offers
        </li>
        <li><span class="parameter">_Refresh</span>
         [number] Refresh rate
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "NonPlayerMerchant:AddTechnologyOffer"></a>
    <strong>NonPlayerMerchant:AddTechnologyOffer (_Good, _Costs)</strong>
    </dt>
    <dd>
    Adds a technology offer to the merchant.  Technology offers do not respawn.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_Good</span>
         [number] Technology type
        </li>
        <li><span class="parameter">_Costs</span>
         [table] Costs table
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "NonPlayerMerchant:AddTroopOffer"></a>
    <strong>NonPlayerMerchant:AddTroopOffer (_Good, _Costs, _Amount, _Refresh)</strong>
    </dt>
    <dd>
    Adds a troop offer to the merchant.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_Good</span>
         [number] Entity or leader type
        </li>
        <li><span class="parameter">_Costs</span>
         [table] Costs table
        </li>
        <li><span class="parameter">_Amount</span>
         [number] Amount of offers
        </li>
        <li><span class="parameter">_Refresh</span>
         [number] Refresh rate
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "NonPlayerMerchant:Deactivate"></a>
    <strong>NonPlayerMerchant:Deactivate ()</strong>
    </dt>
    <dd>
    Deactivates the merchant if it is not a vanilla merchant.



    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "NonPlayerMerchant:GetTradingVolume"></a>
    <strong>NonPlayerMerchant:GetTradingVolume (_SlotIndex)</strong>
    </dt>
    <dd>
    Returns how often the offer at the index was accepted by the player.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_SlotIndex</span>
         [number] Index of offer
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        [number] Trading volume
    </ol>




</dd>
    <dt>
    <a name = "NonPlayerMerchant:SetSpawnpoint"></a>
    <strong>NonPlayerMerchant:SetSpawnpoint (_Spawnpoint)</strong>
    </dt>
    <dd>
    Sets a different spawnpoint for units bought at the merchant.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_Spawnpoint</span>
         [string] Script name of spawnpoint.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2019-01-09 15:42:54 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->

<script>
    window.onscroll = function() {scrollFunction()};

    function scrollFunction() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            document.getElementById("back2top").style.display = "block";
        } else {
            document.getElementById("back2top").style.display = "none";
        }
    }

    function topFunction() {
        document.body.scrollTop = 0; // For Safari
        document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
    }
</script>

</body>
</html>
